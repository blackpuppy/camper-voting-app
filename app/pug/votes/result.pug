extends ../layouts/layout.pug

block content
    if poll
        h2 #{poll.question}
        //- .container
        //-     p
        //-         | Select a chart type:
        //-         br/
        //-         each type in ['Pie', 'Bar']
        //-             label
        //-                 input(type='radio', name='chart-type', value=type)
        //-                 | #{type + ' Chart'}
        //-             br/
        #vote-chart.vote-chart
        .container
            canvas.chart-ctx(width='500' height='400')
    else
        .container
            | #{'The poll does not exist. Back to '}
            a(href='/') Home
            | .

block append scripts
    = '\n'
    script(type='text/javascript', src='https://www.gstatic.com/charts/loader.js')
    = '\n'
    script(type='text/javascript', src='/public/js/chart.js/dist/Chart.min.js')
    = '\n'
    script(type='text/javascript', src='://code.highcharts.com/highcharts.js')
    = '\n'
    script(type='text/javascript').
        var poll = JSON.parse('!{pollJson}');
        //- console.log('poll = ', poll);
    = '\n'
    script(type='text/javascript', src='/controllers/pollChart.client.js')
